!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Select=e()}}(function(){return function e(t,s,o){function i(a,l){if(!s[a]){if(!t[a]){var r="function"==typeof require&&require;if(!l&&r)return r(a,!0);if(n)return n(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var u=s[a]={exports:{}};t[a][0].call(u.exports,function(e){var s=t[a][1][e];return i(s?s:e)},u,u.exports,e,t,s,o)}return s[a].exports}for(var n="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t){(function(s){"use strict";var o="undefined"!=typeof window?window._:"undefined"!=typeof s?s._:null,i=e("react/addons"),n="undefined"!=typeof window?window.AutosizeInput:"undefined"!=typeof s?s.AutosizeInput:null,a=e("classnames"),l=e("./Value"),r=e("./CustomMenuMixin.js"),p=0,u=i.createClass({displayName:"Select",statics:{CustomMenuMixin:r},propTypes:{value:i.PropTypes.any,multi:i.PropTypes.bool,disabled:i.PropTypes.bool,options:i.PropTypes.array,delimiter:i.PropTypes.string,asyncOptions:i.PropTypes.func,autoload:i.PropTypes.bool,placeholder:i.PropTypes.string,noResultsText:i.PropTypes.string,clearable:i.PropTypes.bool,clearValueText:i.PropTypes.string,clearAllText:i.PropTypes.string,searchable:i.PropTypes.bool,searchPromptText:i.PropTypes.string,name:i.PropTypes.string,onChange:i.PropTypes.func,className:i.PropTypes.string,filterOption:i.PropTypes.func,filterOptions:i.PropTypes.func,matchPos:i.PropTypes.string,matchProp:i.PropTypes.string,accessibleLabel:i.PropTypes.string,nullNotAllowed:i.PropTypes.bool},getDefaultProps:function(){return{value:void 0,options:[],disabled:!1,delimiter:",",asyncOptions:void 0,autoload:!0,placeholder:"Select...",noResultsText:"No results found",clearable:!0,clearValueText:"Clear value",clearAllText:"Clear all",searchable:!0,searchPromptText:"Type to search",name:void 0,onChange:void 0,className:void 0,matchPos:"any",matchProp:"any",accessibleLabel:"Choose a value",nullNotAllowed:!1}},getInitialState:function(){return{options:this.props.options,isFocused:!1,isOpen:!1,isLoading:!1,alertMessage:""}},componentWillMount:function(){this._optionsCache={},this._optionsFilterString="",this.setState(this.props.nullNotAllowed&&!this.props.value?this.getStateFromValue(this.props.options[0].value):this.getStateFromValue(this.props.value)),this.props.asyncOptions&&this.props.autoload&&this.autoloadAsyncOptions()},componentWillUnmount:function(){clearTimeout(this._blurTimeout),clearTimeout(this._focusTimeout)},componentWillReceiveProps:function(e){e.value!==this.state.value&&this.setState(this.getStateFromValue(e.value,e.options)),JSON.stringify(e.options)!==JSON.stringify(this.props.options)&&this.setState({options:e.options,filteredOptions:this.filterOptions(e.options)})},componentDidUpdate:function(){if(this._focusAfterUpdate&&(clearTimeout(this._blurTimeout),this._focusTimeout=setTimeout(function(){this.getInputNode().focus(),this._focusAfterUpdate=!1}.bind(this),50)),this._focusedOptionReveal){if(this.refs.focused&&this.refs.menu){var e=this.refs.focused.getDOMNode(),t=this.refs.menu.getDOMNode(),s=e.getBoundingClientRect(),o=t.getBoundingClientRect();(s.bottom>o.bottom||s.top<o.top)&&(t.scrollTop=e.offsetTop+e.clientHeight-t.offsetHeight)}this._focusedOptionReveal=!1}if(""!==this.state.alertMessage){var i=this;setTimeout(function(){i.setState({alertMessage:""})},500)}},getStateFromValue:function(e,t){t||(t=this.state.options),this._optionsFilterString="";var s=this.initValuesArray(e,t),o=this.filterOptions(t,s);return{value:s.map(function(e){return e.value}).join(this.props.delimiter),values:s,inputValue:"",filteredOptions:o,placeholder:!this.props.multi&&s.length?s[0].label:this.props.placeholder,focusedOption:!this.props.multi&&s.length?s[0]:o[0]}},initValuesArray:function(e,t){return Array.isArray(e)||(e="string"==typeof e?e.split(this.props.delimiter):e?[e]:[]),e.map(function(e){return"string"==typeof e?e=o.findWhere(t,{value:e})||{value:e,label:e}:e}.bind(this))},setValue:function(e){this._focusAfterUpdate=!0;var t=this.getStateFromValue(e);t.isOpen=!1,this.fireChangeEvent(t),this.setState(t)},selectValue:function(e){this.props.multi?e&&this.addValue(e):this.setValue(e),this.setState({alertMessage:e.label+" selected"})},addValue:function(e){this.setValue(this.state.values.concat(e))},popValue:function(){this.setValue(o.initial(this.state.values))},removeValue:function(e){this.setValue(o.without(this.state.values,e)),this.setState({alertMessage:e.label+" removed"})},clearValue:function(e){e&&"mousedown"==e.type&&0!==e.button||this.setValue(null)},resetValue:function(){this.setValue(this.state.value)},getInputNode:function(){var e=this.refs.input;return this.props.searchable?e:e.getDOMNode()},fireChangeEvent:function(e){e.value!==this.state.value&&this.props.onChange&&this.props.onChange(e.value,e.values)},handleMouseDown:function(e){this.props.disabled||"mousedown"==e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.handleMouseDownImplementation())},handleMouseDownImplementation:function(){this.state.isFocused?this.setState({isOpen:!0}):(this._openAfterFocus=!0,this.getInputNode().focus(),this.setState({isFocused:!0}))},handleInputFocus:function(){var e=this.state.isOpen||this._openAfterFocus,t=null!==this.state.focusedOption&&void 0!==this.state.focusedOption?this.state.filteredOptions.length+" options available. "+this.state.focusedOption.label+" currently focused.":"";this.setState({isFocused:!0,isOpen:e,alertMessage:e?t:""}),this._openAfterFocus=!1},handleInputBlur:function(){this._blurTimeout=setTimeout(function(){this._focusAfterUpdate||this.setState({isOpen:!1,isFocused:!1})}.bind(this),50)},handleKeyDown:function(e){if(!this.state.disabled){switch(e.keyCode){case 8:return void(this.props.nullNotAllowed||this.state.inputValue||this.popValue());case 9:if(e.shiftKey||!this.state.isOpen||!this.state.focusedOption)return;this.selectFocusedOption();break;case 13:this.state.isOpen&&this.selectFocusedOption();break;case 27:this.state.isOpen?this.resetValue():this.clearValue();break;case 38:this.focusPreviousOption();break;case 40:this.focusNextOption();break;default:return}e.preventDefault()}},handleInputChange:function(e){this._optionsFilterString=e.target.value;var t=this.filterOptions(this.state.options),s=o.contains(t,this.state.focusedOption)?this.state.focusedOption:t[0],i=null!==this.state.focusedOption&&void 0!==this.state.focusedOption?t.length+" options available. "+this.state.focusedOption.label+" currently focused.":"";this.props.asyncOptions?(this.setState({isLoading:!0,inputValue:e.target.value,focusedOption:s,alertMessage:i}),this.loadAsyncOptions(e.target.value,{isLoading:!1,isOpen:!0})):this.setState({isOpen:!0,alertMessage:i,inputValue:e.target.value,filteredOptions:t,focusedOption:s})},autoloadAsyncOptions:function(){this.loadAsyncOptions("",{},function(){})},loadAsyncOptions:function(e,t){for(var s=0;s<=e.length;s++){var i=e.slice(0,s);if(this._optionsCache[i]&&(e===i||this._optionsCache[i].complete)){var n=this._optionsCache[i].options;return void this.setState(o.extend({options:n,filteredOptions:this.filterOptions(n),focusedOption:this.filterOptions(n)[0]},t))}}var a=this._currentRequestId=p++;this.props.asyncOptions(e,function(s,i){this._optionsCache[e]=i,a===this._currentRequestId&&this.setState(o.extend({options:i.options,filteredOptions:this.filterOptions(i.options),focusedOption:this.filterOptions(i.options)[0]},t))}.bind(this))},filterOptions:function(e,t){if(!this.props.searchable)return e;var s=this._optionsFilterString,i=(t||this.state.values).map(function(e){return e.value});if(this.props.filterOptions)return this.props.filterOptions.call(this,e,s,i);var n=function(e){return this.props.multi&&o.contains(i,e.value)?!1:this.props.filterOption?this.props.filterOption.call(this,e,s):s&&"start"!==this.props.matchPos?"label"!==this.props.matchProp&&e.value.toLowerCase().indexOf(s.toLowerCase())>=0||"value"!==this.props.matchProp&&e.label.toLowerCase().indexOf(s.toLowerCase())>=0:"label"!==this.props.matchProp&&e.value.toLowerCase().substr(0,s.length)===s||"value"!==this.props.matchProp&&e.label.toLowerCase().substr(0,s.length)===s};return o.filter(e,n,this)},selectFocusedOption:function(){return this.selectValue(this.state.focusedOption)},focusOption:function(e){this.setState({focusedOption:e})},focusNextOption:function(){this.focusAdjacentOption("next")},focusPreviousOption:function(){this.focusAdjacentOption("previous")},focusAdjacentOption:function(e){this._focusedOptionReveal=!0;var t=this.state.filteredOptions,s=null!==this.state.focusedOption&&void 0!==this.state.focusedOption?t.length+" options available. "+this.state.focusedOption.label+" currently focused.":"";if(!this.state.isOpen&&!this.props.asyncOptions)return this.handleMouseDownImplementation(),void this.setState({isOpen:!0,alertMessage:s,inputValue:"",focusedOption:this.state.focusedOption||t["next"===e?0:t.length-1]});if(t.length){for(var o=-1,i=0;i<t.length;i++)if(this.state.focusedOption===t[i]){o=i;break}var n=t[0];"next"===e&&o>-1&&o<t.length-1?n=t[o+1]:"previous"===e&&(n=o>0?t[o-1]:t[t.length-1]),this.props.asyncOptions&&!this.state.isOpen?(this.handleMouseDownImplementation(),this.setState({isOpen:!0,alertMessage:s,inputValue:"",focusedOption:this.state.focusedOption||t["next"===e?0:t.length-1]})):this.setState(this.props.multi?{focusedOption:n,inputValue:n.label,value:n.value,placeholder:n.label,alertMessage:n.label+" currently focused. Press enter to select."}:this.props.searchable?{focusedOption:n,inputValue:n.label,placeholder:n.label,alertMessage:n.label+" currently focused. Press enter to select."}:{focusedOption:n,value:n.value,placeholder:n.label,alertMessage:n.label+" currently focused. Press enter to select."})}},unfocusOption:function(e){this.state.focusedOption===e&&this.setState({focusedOption:null})},swapFocus:function(e,t,s){if(e&&e[t]&&e[s]&&(s||0===s)&&t!==s){var o=i.addons.cloneWithProps(e[t],{key:e[t].key,ref:null}),n=i.addons.cloneWithProps(e[s],{key:e[s].key,ref:"focused"});o.props.className="Select-option",n.props.className="Select-option is-focused",this.cachedFocusedItemIndex=s,this.cachedMenu.splice(t,1,o),this.cachedMenu.splice(s,1,n)}},cachedFocusedItemIndex:0,cachedListItemsIndexLookup:{},cachedMenu:[],cachedFiltered:[],buildMenu:function(){var e=this.state.focusedOption?this.state.focusedOption.value:null;if(this.cachedFiltered==this.state.filteredOptions)return this.swapFocus(this.cachedMenu,this.cachedFocusedItemIndex,this.cachedListItemsIndexLookup[e]),this.cachedMenu;this.cachedListItemsIndexLookup={};var t=o.map(this.state.filteredOptions,function(t,s){var o=e===t.value,n=a({"Select-option":!0,"is-focused":o}),l=o?"focused":null,r=this.focusOption.bind(this,t),p=this.unfocusOption.bind(this,t),u=this.selectValue.bind(this,t);this.cachedListItemsIndexLookup[t.value]=s;var c="";return o&&(this.cachedFocusedItem=s,c=" Selected"),i.createElement("a",{role:"listitem","aria-label":t.label+c,ref:l,key:"option-"+t.value,className:n,onMouseEnter:r,onMouseLeave:p,onMouseDown:u,onClick:u},t.label)},this);return t.length?t:i.createElement("div",{className:"Select-noresults"},this.props.asyncOptions&&!this.state.inputValue?this.props.searchPromptText:this.props.noResultsText)},buildCustomMenu:function(){if(this.props.children){var e=this.props.children;return i.addons.cloneWithProps(e,{onSelectItem:this.selectValue,options:this.props.options,filtered:this.state.filteredOptions,inputValue:this.state.inputValue,focussedItem:this.state.focusedOption,onFocusItem:this.focusOption,onUnfocusItem:this.unfocusOption})}},switchFocus:function(){this.getInputNode().focus()},render:function(){var e=a("Select",this.props.className,{"is-multi":this.props.multi,"is-searchable":this.props.searchable,"is-open":this.state.isOpen,"is-focused":this.state.isFocused,"is-loading":this.state.isLoading,"is-disabled":this.props.disabled,"has-value":this.state.value}),t=[];this.props.multi&&this.state.values.forEach(function(e){var s=o.extend({key:e.value,onRemove:this.removeValue.bind(this,e)},e);t.push(i.createElement(l,s))},this),!this.props.disabled&&(this.state.inputValue||this.props.multi&&t.length)||t.push(i.createElement("div",{"aria-hidden":"true",className:"Select-placeholder",key:"placeholder"},this.state.placeholder));var s=this.state.isLoading?i.createElement("span",{className:"Select-loading","aria-hidden":"true"}):null,r=!this.props.nullNotAllowed&&this.props.clearable&&this.state.value&&!this.props.disabled?i.createElement("span",{role:"button",className:"Select-clear",title:this.props.multi?this.props.clearAllText:this.props.clearValueText,"aria-label":this.props.multi?this.props.clearAllText:this.props.clearValueText,onMouseDown:this.clearValue,onClick:this.clearValue,dangerouslySetInnerHTML:{__html:"&times;"}}):null,p=this.props.children?this.buildCustomMenu():this.buildMenu();this.cachedFiltered=this.state.filteredOptions,this.cachedMenu=p;var u,c=this.state.isOpen?i.createElement("div",{id:"Select-menu",ref:"menu",className:"Select-menu"},p):null,h={position:"absolute",left:"-999999px",top:"auto",overflow:"hidden",height:"1px",width:"1px"},d="",f=!1,m=this.state.placeholder;if(this.props.multi){var v=this.state.values;v.length>1?(m="",v.forEach(function(e,t){m+=String(e.label),t<v.length-1&&(m+=", ")}),m+=" currently selected."):1===v.length&&(m=v[0].label+" currently selected."),d=i.createElement("input",{style:h,"aria-label":m+", "+this.props.accessibleLabel+", Combobox. Press down arrow key to open select options or start typing for options to be filtered. Use up and down arrow keys to navigate options. Press enter to select an option.",onFocus:this.switchFocus,minWidth:"5"}),u="",f=!0}else u=m+", "+this.props.accessibleLabel+", Combobox. Press down arrow key to open select options or start typing for options to be filtered. Use up and down arrow keys to navigate options. Press enter to select an option.";var b,y={ref:"input",className:"Select-input",tabIndex:this.props.tabIndex||0,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur};if(this.props.searchable&&!this.props.disabled)b=i.createElement(n,i.__spread({"aria-hidden":f,"aria-label":u,value:this.state.inputValue,onChange:this.handleInputChange,minWidth:"5"},y));else{var O=m+", "+this.props.accessibleLabel+", Combobox. Press down arrow key to open select options. Use up and down arrow keys to navigate options. Press enter to select an option. Typing will not filter options, this is a non-searchable combobox.";b=i.createElement("div",i.__spread({"aria-label":O},y)," ")}return i.createElement("div",{ref:"wrapper",className:e},i.createElement("input",{type:"hidden",ref:"value",name:this.props.name,value:this.state.value,disabled:this.props.disabled}),i.createElement("div",{className:"Select-control",ref:"control",onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},d,t,b,i.createElement("span",{className:"Select-arrow"}),s,r),c,i.createElement("div",{tabIndex:"-1",style:h,id:"alert-options",role:"alert","aria-label":"End of select"},this.state.alertMessage))}});t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CustomMenuMixin.js":3,"./Value":4,classnames:2,"react/addons":void 0}],2:[function(e,t){function s(){for(var e=arguments,t=[],s=0;s<e.length;s++)e[s]&&"string"==typeof e[s]?t.push(e[s]):"object"==typeof e[s]&&(t=t.concat(Object.keys(e[s]).filter(function(t){return e[s][t]})));return t.join(" ")||void 0}t.exports=s},{}],3:[function(e,t){(function(e){"use strict";var s="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,o={propTypes:{onSelectItem:s.PropTypes.func,options:s.PropTypes.arrayOf(s.PropTypes.object),filtered:s.PropTypes.arrayOf(s.PropTypes.object),inputValue:s.PropTypes.string,focussedItem:s.PropTypes.object,onFocusItem:s.PropTypes.func,onUnfocusItem:s.PropTypes.func},defaultProps:{onSelectItem:function(){},options:[],filtered:[],inputValue:null,focussedItem:null,onFocusItem:function(){},onUnfocusItem:function(){}},selectItem:function(e){this.props.onSelectItem(e)},focusItem:function(e){this.props.onFocusItem(e)},unfocusItem:function(e){this.props.onUnfocusItem(e)}};t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t){(function(s){"use strict";var o=("undefined"!=typeof window?window._:"undefined"!=typeof s?s._:null,"undefined"!=typeof window?window.React:"undefined"!=typeof s?s.React:null),i=(e("classnames"),o.createClass({displayName:"Value",propTypes:{label:o.PropTypes.string.isRequired},blockEvent:function(e){e.stopPropagation()},render:function(){return o.createElement("div",{className:"Select-item",role:"button",onClick:this.props.onRemove,"aria-label":"Remove "+this.props.label},o.createElement("span",{className:"Select-item-icon",onMouseDown:this.blockEvent,onClick:this.props.onRemove,onTouchEnd:this.props.onRemove},"×"),o.createElement("span",{className:"Select-item-label"},this.props.label))}}));t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{classnames:2}]},{},[1])(1)});